/* File generated by: simse.codegenerator.guigenerator.AtAGlanceTableModelGenerator */
package simse.gui;

import javax.swing.table.*;
import java.util.*;
import java.lang.*;
import java.text.*;

import simse.adts.objects.*;
import simse.state.*;


public class TheProjectTableModel extends AbstractTableModel
{
private Vector<String> columnNames; // column names
private Vector<Vector<Object>> data; // data in table
private State state;

private NumberFormat numFormat;

public TheProjectTableModel(State s)
{
state = s;
columnNames = new Vector<String>();
data = new Vector<Vector<Object>>();
numFormat = NumberFormat.getNumberInstance(Locale.US);
initColNames();
update();
}

public int getColumnCount()
{
return columnNames.size();
}

public int getRowCount()
{
if (data.size() > 0) {
return data.elementAt(0).size();
}return 0;
}

public String getColumnName(int col)
{
return columnNames.elementAt(col);
}

public int getColumnIndex(String columnName)
{
for(int i=0; i<columnNames.size(); i++)
{
String colName = columnNames.elementAt(i);
if(colName.equals(columnName))
{
return i;
}
}
return -1;
}

public Object getValueAt(int row, int col)
{
return data.elementAt(col).elementAt(row);
}

public void setValueAt(Object value, int row, int col)
{
data.elementAt(col).add(value);
fireTableCellUpdated(row, col);
}

private void initColNames()
{
columnNames.add("Name");
columnNames.add("CurrentIteration");
columnNames.add("TimeElapsed");
columnNames.add("TimeAllotted");
}

public void update()
{

if (!state.getClock().isStopped()) {
Vector<TheProject> theprojects = state.getProjectStateRepository().getTheProjectStateRepository().getAll();
Vector<Object> temp = new Vector<Object>();
// Initialize Name:
temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
temp.add(theprojects.elementAt(i).getName());
}
if(data.size() < 1)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 0);
}

// Initialize CurrentIteration:
temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getCurrentIteration()));
}
if(data.size() < 2)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 1);
}

// Initialize TimeElapsed:
temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getTimeElapsed()));
}
if(data.size() < 3)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 2);
}

// Initialize TimeAllotted:
temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getTimeAllotted()));
}
if(data.size() < 4)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 3);
}

}
else // game over
{
data.clear();
columnNames.clear();
Vector<TheProject> theprojects = state.getProjectStateRepository().getTheProjectStateRepository().getAll();
Vector<Object> temp = new Vector<Object>();
// Initialize Name:
if(columnNames.contains("Name") == false)
{
columnNames.add("Name");
}temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
temp.add(theprojects.elementAt(i).getName());}
if(data.size() < 1)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 0);
}

// Initialize CurrentIteration:
if(columnNames.contains("CurrentIteration") == false)
{
columnNames.add("CurrentIteration");
}temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getCurrentIteration()));}
if(data.size() < 2)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 1);
}

// Initialize Score:
if(columnNames.contains("Score") == false)
{
columnNames.add("Score");
}temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getScore()));
}
if(data.size() < 3)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 2);
}

// Initialize TimeElapsed:
if(columnNames.contains("TimeElapsed") == false)
{
columnNames.add("TimeElapsed");
}temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getTimeElapsed()));}
if(data.size() < 4)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 3);
}

// Initialize TimeAllotted:
if(columnNames.contains("TimeAllotted") == false)
{
columnNames.add("TimeAllotted");
}temp = new Vector<Object>();
for(int i=0; i<theprojects.size(); i++)
{
numFormat.setMinimumFractionDigits(0);
numFormat.setMaximumFractionDigits(0);
temp.add(numFormat.format(theprojects.elementAt(i).getTimeAllotted()));}
if(data.size() < 5)
{
data.add(temp);
}
else
{
data.setElementAt(temp, 4);
}

fireTableStructureChanged();
}

fireTableDataChanged(); // notify listeners that table data has changed
}


public Class getColumnClass(int c)
{
return getValueAt(0, c).getClass();
}
}